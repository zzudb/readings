if(!window.encoder){throw ("dblp-search.js: encoder.js library has not been loaded.")}if(!window.dblp){throw ("dblp-search.js: dblp.js has not been loaded.")}dblp.search=dblp.search||{};dblp.search.GUI_URL=dblp.BASE_URL+"/search";dblp.search.CS_GUI_URL=dblp.BASE_URL+"/search/publ";dblp.search.MAX_HITS_TO_SHOW=5;dblp.search.MIN_CHARS_FOR_QUERY=2;(function(j,a){function e(o,p){var n=o+"?";for(var q in p){n+=q+"="+p[q]+"&"}n=n.substring(0,n.length-1);return encodeURI(n)}function l(n){if(typeof n=="string"){str=n}else{str=n.toString()}return str.replace(/\B(?=(\d{3})+(?!\d))/g,",")}function c(p,o){var n;if(p=="authors"){n=dblp.CS_AUTHORS_API_URL}else{if(p=="venues"){n=dblp.CS_VENUES_API_URL}else{if(p=="insts"){n=dblp.CS_INSTS_API_URL}else{console.error("getQueryUrl: unrecognized facet descriptor: "+p);return}}}n+="?q="+encodeURIComponent(o)+"&p=2&h="+(dblp.search.MAX_HITS_TO_SHOW+1);n+="&c=0&rd=2d&format=jsonp&compl=score";return(n)}function d(q,o){for(var p in q.show){var n=q.show[p];if(typeof n=="string"){continue}if("@field" in n&&n["@field"]==o){if("text" in n){return n.text}else{return""}}}return null}function h(o,p){if(p==null){return""}var x;if(o=="authors"){x='<li><a href="'+dblp.BASE_URL+"/pers/hd/";x+=p.urlpt+'">';var n=p.author.split("~*")[0];if(n.match(/.+ [0-9]{4}/)){x+=n.substring(0,n.length-5);x+=' <span class="homonym-nr">'+n.substring(n.length-4)+"</span></a>"}else{x+=n+"</a>"}if("note" in p&&p.note.length>0){x+=" &mdash; <small>"+p.note+"</small>"}x+="</li>"}else{if(o=="venues"){x='<li><a href="'+dblp.BASE_URL+"/";x+=p.href+'">';var w=p.venue.split("~*")[0];x+=w+"</a></li>"}else{if(o=="insts"){x='<li><a href="'+dblp.BASE_URL+"/";x+=p.key+'.html">';var w=p.institution.split("~*")[0];x+=w+"</a>";if("location" in p){var s=p.location;if(jQuery.type(s)=="string"){s=[s]}if(s.length>0){x+=" &mdash; <small>"+s[0]+"</small>"}}x+="</li>"}else{if(o=="publs"){x='<li><a href="'+dblp.BASE_URL+"/rec/";x+=p.urlpt+'">';var v=p.authors;if(v&&"author" in v){var r=v.author;if(jQuery.type(r)=="string"){r=[r]}var q=r[0].split(" ");var u=q.length-1;while(u>0){part=q[u];if(!part.match(/^[0-9]{4}|Jr\.|II|III|IV$/)){break}u--}x+="<small>"+encoder.htmlEncode(q[u]);if(r.length>1){x+=" et al."}x+=":</small> "}var w=encoder.htmlDecode(p.title);if(w.length>65){var u=64;while(u>42&&w[u]!=" "){u--}w=w.substring(0,u+1)+"..."}x+=encoder.htmlEncode(w);var t=p.year;x+=" <small>("+t+")</small>";x+="</a></li>"}else{if(o=="semscholar"){x='<li><a href="'+dblp.BASE_URL+"/rec/"+p.sourceIds[0]+'">';if("authors" in p&&p.authors.length>0&&"name" in p.authors[0]){var r=p.authors[0].name;var q=r.split(" ");var u=q.length-1;while(u>0){part=q[u];if(!part.match(/^[0-9]{4}|Jr\.|II|III|IV$/)){break}u--}x+="<small>"+encoder.htmlEncode(q[u]);if(r.length>1){x+=" et al."}x+=":</small> "}var w=encoder.htmlDecode(p.title);if(w.length>65){var u=64;while(u>42&&w[u]!=" "){u--}w=w.substring(0,u+1)+"..."}x+=encoder.htmlEncode(w);x+="</a></li>"}else{console.error("getListItem( facet, record ): unrecognized facet descriptor: "+o);return null}}}}}return(x)}function b(){var n=$('#search input[name="q"]');return encoder.htmlDecode(n.val().trim())}function g(){var n=$("#search-mode-selector input:checked").val();if(!n){n=$.cookie("dblp-search-mode")}if(!n){n="c"}return n}var m=function(q){if(typeof q==="undefined"){q=true}var o=b();var p=window.location.origin+window.location.pathname;if(o&&o!=""){p+="?q="+encodeURIComponent(o)}var r=window.document.title;if(q){history.replaceState({q:o},r,p)}var n=$("#search-external a");n.each(function(t,u){var s=$(this).attr("href");var v="?q=";if(s.indexOf("?query=")>1){v="?query="}parts=s.split(v,2);if(o.trim().length==0){$(this).attr("href",parts[0])}else{$(this).attr("href",parts[0]+v+encodeURIComponent(o))}})};function f(){var o="semscholar";var u=$("#search form input");if(u.data(o+"QueryMutex")){console.warn(o+": already querying, aborting ajax");return}u.data(o+"QueryMutex",true);var r=$("#search .results");var v=r.find(".publs .waiting");var s=r.find(".publs .matches");s.hide();v.show();s.empty();var t=u.val().trim();var n=dblp.SEMSCHOLAR_API_URL;var p=dblp.search.MAX_HITS_TO_SHOW;var q={q:t,s:2*p,p:1};console.debug("calling: ",e(n,q));$.ajax({url:n,type:"GET",data:q,dataType:"json"}).done(function(B,D,A){try{var C=B.papers;var z=parseInt(B.total);console.info(o+": "+z+" matches");if(z==0){s.append("<li><i>no matches</i></li>")}else{var w=[];for(var y=0;y<C.length&&w.length<p;y++){if("sourceIds" in C[y]&&C[y].sourceIds.length>0){w.push(C[y])}}console.info(y,C,w);if(w&&w.length>0){for(var y=0;y<w.length;y++){s.append(h("semscholar",w[y]))}s.append('<li><a href="'+dblp.search.GUI_URL+"/"+o+"?q="+encodeURIComponent(t)+'"><i>show more</a></i></li>')}else{s.append("<li><i>no matches</i></li>")}}}catch(x){s.append('<li><i class="warning">temporarily not available</i></li>');console.error(o+": "+x.toString())}}).fail(function(w,y,x){s.append('<li><i class="warning">temporarily not available</i></li>');console.error(o+": ["+y+"] "+x)}).always(function(w,x){v.hide();s.show();u.data(o+"QueryMutex",false);console.info(o+": done.")})}function i(p){if(p!="publs"&&p!="authors"&&p!="venues"&&p!="insts"){console.error("unrecognized facet descriptor: "+p+", aborting ajax");return}if(!(dblp.TEAM_MODE_ENABLED||dblp.LEY_MODE_ENABLED||dblp.MRA_MODE_ENABLED)&&p=="insts"){return}var v=$("#search form input");if(v.data(p+"QueryMutex")){console.warn(p+": already querying, aborting ajax");return}v.data(p+"QueryMutex",true);var r=$("#search .results");var w=r.find("."+p+" .waiting");var s=r.find("."+p+" .matches");s.hide();w.show();s.empty();var t=g();var u=b();var n;var o;if(p=="publs"){n=dblp.CS_PUBLS_API_URL;if(t=="p"){o=dblp.search.MAX_HITS_TO_SHOW}else{o=parseInt(dblp.search.MAX_HITS_TO_SHOW/2)}}else{if(p=="authors"){n=dblp.CS_AUTHORS_API_URL;if(t=="a"){o=2*dblp.search.MAX_HITS_TO_SHOW}else{o=dblp.search.MAX_HITS_TO_SHOW}}else{if(p=="venues"){n=dblp.CS_VENUES_API_URL;if(t=="v"){o=2*dblp.search.MAX_HITS_TO_SHOW}else{o=dblp.search.MAX_HITS_TO_SHOW}}else{if(p=="insts"){n=dblp.CS_INSTS_API_URL;if(t=="i"){o=2*dblp.search.MAX_HITS_TO_SHOW}else{o=dblp.search.MAX_HITS_TO_SHOW}}}}}var q={q:u,p:2,h:o+1,c:0,format:"jsonp"};if(p=="publs"){q.rd="1a"}else{q.compl="score";q.rd="2d"}console.debug("calling: ",e(n,q));$.ajax({url:n,type:"GET",data:q,dataType:"jsonp"}).done(function(C,E,B){try{var y=C.result.hits;var D=parseInt(y["@total"]);console.info(p+": "+D+" matches");if(D==0){s.append("<li><i>no matches</i></li>")}else{var x=[];if("hit" in y){x=y.hit}if(x&&x.length>0){for(var A=0;A<x.length-1;A++){s.append(h(p,x[A]["info"]))}if(D>1000&&p!="publs"){s.append("<li><i>more than 1000 hits, refine query</i></li>")}else{if(D>x.length){s.append('<li><a href="'+dblp.search.GUI_URL+"/"+p+"?q="+encodeURIComponent(u)+'"><i>show all '+l(D)+" matches</a></i></li>")}else{if(D==x.length){s.append(h(p,x[x.length-1]["info"]))}}}}else{s.append("<li><i>no matches</i></li>")}}}catch(z){s.append('<li><i class="warning">temporarily not available</i></li>');console.error(p+": "+z.toString())}}).fail(function(x,z,y){s.append('<li><i class="warning">temporarily not available</i></li>');console.error(p+": ["+z+"] "+y)}).always(function(x,y){w.hide();s.show();v.data(p+"QueryMutex",false);console.info(p+": done.")})}function k(r){if(!r){r=g()}var o=$("#search-mode-selector .head img");var q=$("#search form");var n=$("#search form input");var p=$("#search").find(".results");if(r=="a"){$("#search-mode-author").prop("checked",true);o.attr("src",dblp.BASE_URL+"/img/person.dark.16x16.png");q.attr("action",dblp.BASE_URL+"/search/author");n.attr("placeholder","search for authors");p.find("div").hide();p.find("div.authors").show();$.cookie("dblp-search-mode","a",{path:dblp.COOKIE_PATH,expires:dblp.COOKIE_EXPIRES_IN_DAYS})}else{if(r=="v"){$("#search-mode-venue").prop("checked",true);o.attr("src",dblp.BASE_URL+"/img/venues.dark.notitle.16x16.png");q.attr("action",dblp.BASE_URL+"/search/venue");n.attr("placeholder","search for venues");p.find("div").hide();p.find("div.venues").show();$.cookie("dblp-search-mode","v",{path:dblp.COOKIE_PATH,expires:dblp.COOKIE_EXPIRES_IN_DAYS})}else{if(r=="i"){$("#search-mode-inst").prop("checked",true);o.attr("src",dblp.BASE_URL+"/img/institution.dark.16x16.png");q.attr("action",dblp.BASE_URL+"/search/inst");n.attr("placeholder","search for institutions");p.find("div").hide();p.find("div.insts").show();$.cookie("dblp-search-mode","i",{path:dblp.COOKIE_PATH,expires:dblp.COOKIE_EXPIRES_IN_DAYS})}else{if(r=="p"){$("#search-mode-publ").prop("checked",true);o.attr("src",dblp.BASE_URL+"/img/paper.dark.16x16.png");q.attr("action",dblp.BASE_URL+"/search/publ");n.attr("placeholder","search for publications");p.find("div").hide();p.find("div.publs").show();$.cookie("dblp-search-mode","p",{path:dblp.COOKIE_PATH,expires:dblp.COOKIE_EXPIRES_IN_DAYS})}else{if(r=="s"){$("#search-mode-semscholar").prop("checked",true);o.attr("src",dblp.BASE_URL+"/img/semscholar.color.16x16.png");q.attr("action",dblp.BASE_URL+"/search/semscholar");n.attr("placeholder","full-text search by Semantic Scholar");p.find("div").hide();p.find("div.publs").show();$.cookie("dblp-search-mode","s",{path:dblp.COOKIE_PATH,expires:dblp.COOKIE_EXPIRES_IN_DAYS})}else{$("#search-mode-combined").prop("checked",true);o.attr("src",dblp.BASE_URL+"/img/search.dark.16x16.png");q.attr("action",dblp.BASE_URL+"/search");n.attr("placeholder","search dblp");p.find("div").show();$.cookie("dblp-search-mode","c",{path:dblp.COOKIE_PATH,expires:dblp.COOKIE_EXPIRES_IN_DAYS})}}}}}}j.init=function(){if($("#search").length==0){return}var q=$('#search .drop-down .body input[name="search-mode"]');var s=$.cookie("dblp-search-mode");k(s);m();var o=$("#search form input");o.attr("autocomplete","off");var p=$("#search .results");var r=o.outerHeight()-parseInt(o.css("border-bottom-width"));p.css("top",r+"px");p.find(".waiting").hide();o.css("width",(o.innerWidth()-16)+"px");o.css("padding-right","20px");var n=$("#search .clear");n.css("position","absolute");n.css("cursor","pointer");n.css("top","50%");n.css("margin-top","-8px");n.css("right","4px");n.css("z-index","55");n.hide();o.data("authorsQueryMutex",false);o.data("venuesQueryMutex",false);o.data("instsQueryMutex",false);o.on("input",function(){var u=$(this).val().trim().length;if(u==0){n.hide()}else{n.show()}m();clearTimeout($.data(this,"authorsQueryTimer"));clearTimeout($.data(this,"venuesQueryTimer"));clearTimeout($.data(this,"instsQueryTimer"));clearTimeout($.data(this,"publsQueryTimer"));clearTimeout($.data(this,"semscholarQueryTimer"));if(u<dblp.search.MIN_CHARS_FOR_QUERY){p.find(".matches").empty();p.find(".matches").append("<li><i>no matches</i></li>");p.find(".waiting").hide();p.find(".matches").show()}else{$(this).css("z-index","33");$(this).css("border-bottom-style","dotted");p.show();var z=g();if(!z||z=="c"||z=="a"){var t=setTimeout(function(){i("authors")},dblp.UX_TYPING_QUERY_DELAY_MSECS(u));$.data(this,"authorsQueryTimer",t)}if(!z||z=="c"||z=="v"){var y=setTimeout(function(){i("venues")},dblp.UX_TYPING_QUERY_DELAY_MSECS(u));$.data(this,"venuesQueryTimer",y)}if(!z||z=="c"||z=="i"){var x=setTimeout(function(){i("insts")},dblp.UX_TYPING_QUERY_DELAY_MSECS(u));$.data(this,"instsQueryTimer",x)}if(!z||z=="c"||z=="p"){var w=setTimeout(function(){i("publs")},dblp.UX_TYPING_QUERY_DELAY_MSECS(u));$.data(this,"publsQueryTimer",w)}if(z=="s"){var v=setTimeout(function(){f()},dblp.UX_TYPING_QUERY_DELAY_MSECS(u));$.data(this,"semscholarQueryTimer",v)}}});if(o.val().trim().length>=dblp.search.MIN_CHARS_FOR_QUERY){if(!s||s=="c"||s=="a"){i("authors")}if(!s||s=="c"||s=="v"){i("venues")}if(!s||s=="c"||s=="i"){i("insts")}if(!s||s=="c"||s=="p"){i("publs")}if(s=="s"){f()}p.hide()}if(o.val().trim().length>0){n.show()}$("#search").focusout(function(){if(p.is(":hover")){return}o.css("z-index","0");o.css("border-bottom-style","solid");p.hide()});$("#search").mouseleave(function(){if(o.is(":focus")){return}o.css("z-index","0");o.css("border-bottom-style","solid");p.hide()});o.focusin(function(){if($(this).val().trim().length>0){$(this).css("z-index","33");$(this).css("border-bottom-style","dotted");p.show()}});q.click(function(){var t=$(this).val();k(t);if(t=="c"||t=="a"){i("authors")}if(t=="c"||t=="v"){i("venues")}if(t=="c"||t=="i"){i("insts")}if(t=="c"||t=="p"){i("publs")}if(t=="s"){f()}$(this).blur();return true});n.click(function(){o.css("z-index","0");o.css("border-bottom-style","solid");p.hide();n.hide();o.val("");o.get(0).focus();m()})}})(dblp.search);$(document).ready(dblp.search.init());